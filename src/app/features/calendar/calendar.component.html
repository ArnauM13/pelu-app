<div class="calendar-container">
  <!-- Calendar Header -->
  <div class="calendar-header">
    <div class="calendar-navigation">
      <button class="nav-btn" (click)="previousWeek()">
        <i class="pi pi-chevron-left"></i>
      </button>
      <button class="nav-btn today-btn" (click)="today()">
        Avui
      </button>
      <button class="nav-btn" (click)="nextWeek()">
        <i class="pi pi-chevron-right"></i>
      </button>
    </div>
    <div class="calendar-title">
      Setmana del {{ formatPopupDate(format(viewDate(), 'yyyy-MM-dd')) }}
    </div>
  </div>

  <!-- Horizontal Weekly View -->
  <div class="calendar-body">
    <div class="horizontal-week-view">
      <!-- Time column -->
      <div class="time-column">
        <div class="time-header">Hora</div>
        @for (time of timeSlots(); track time; let k = $index) {
        <div class="time-slot-label">{{ time }}</div>
        }
      </div>

      <!-- Days columns -->
      @for (day of weekDays(); track day; let i = $index) {
      <div class="day-column" [class.past]="isPastDate(day)">
        <div class="day-header">
          <div class="day-name">{{ getDayName(day) }}</div>
          <div class="day-date">{{ format(day, 'dd/MM') }}</div>
        </div>

        <!-- Time slots for this day -->
        @for (time of timeSlots(); track time; let k = $index) {
        <div class="day-time-slot"
             [class.available]="isTimeSlotAvailable(day, time)"
             [class.booked]="!isTimeSlotAvailable(day, time)"
             [class.selected]="isDaySelected(day) && isTimeSlotSelected(day, time)"
             [class.clickable]="isTimeSlotAvailable(day, time)"
             (click)="isTimeSlotAvailable(day, time) ? selectTimeSlot(day, time) : null">
          @if (!isTimeSlotAvailable(day, time)) {
          <div class="booked-event">
            Ocupat
          </div>
          }
        </div>
        }
      </div>
      }
    </div>
  </div>
</div>
