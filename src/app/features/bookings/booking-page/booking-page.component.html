<!-- Show mobile component on mobile devices -->
@if (isMobile()) {
  <pelu-booking-mobile-page></pelu-booking-mobile-page>
} @else {
  <!-- Desktop version -->
  <div class="booking-page">
    <!-- Date Selection Controls -->
    <div class="date-controls">
      <pelu-button
        label="Avui"
        icon="pi pi-calendar"
        size="small"
        severity="primary"
        class="today-btn"
        (clicked)="onTodayClicked()"
      />
      <pelu-input-date
        [(ngModel)]="selectedDate"
        [showButtonBar]="true"
        [minDate]="todayDate()"
        (valueChange)="onDateChange($event)"
        placeholder="Selecciona una data"
      />
      <div class="week-indicator">
        {{ getWeekInfo() }}
      </div>
    </div>

    <!-- Calendar Section -->
    <div class="calendar-section">
      <pelu-calendar-component
        #calendarComponent
        [mini]="false"
        [events]="[]"
        (dateSelected)="onTimeSlotSelected($event)"
      >
      </pelu-calendar-component>
    </div>
  </div>
}

<!-- Service Selection Popup -->
<pelu-service-selection-popup
  [open]="showServiceSelectionPopup()"
  [selectionDetails]="serviceSelectionDetails()"
  (serviceSelected)="onServiceSelected($event)"
  (cancelled)="onServiceSelectionCancelled()"
>
</pelu-service-selection-popup>

<!-- Booking Confirmation Popup -->
<pelu-booking-popup
  [open]="showBookingPopup()"
  [bookingDetails]="bookingDetails()"
  [availableServices]="availableServices()"
  (confirmed)="onBookingConfirmed($event)"
  (cancelled)="onBookingCancelled()"
  (clientNameChanged)="onClientNameChanged($event)"
  (emailChanged)="onEmailChanged($event)"
>
</pelu-booking-popup>

<!-- Login Prompt for Anonymous Users -->
<pelu-popup-dialog
  [isOpen]="showLoginPrompt()"
  [config]="loginPromptDialogConfig()"
  (closed)="onLoginPromptClose()"
>
  <div class="prompt-body">
    <div class="success-icon">âœ…</div>
    <p class="success-message">
      {{ 'BOOKING.SUCCESS_MESSAGE' | translate }}
    </p>
    <p class="email-notice">
      {{ 'BOOKING.EMAIL_NOTICE' | translate }}
    </p>
  </div>
</pelu-popup-dialog>
