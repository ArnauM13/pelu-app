<div class="language-selector">
  <button
    class="language-button"
    (click)="toggleDropdown()"
    [attr.aria-label]="'LANGUAGES.SELECT_LANGUAGE' | translate"
    type="button">
    @if (currentLanguage()?.flagImage) {
    <span class="flag">
      <img [src]="currentLanguage()?.flagImage" [alt]="currentLanguage()?.name" class="flag-image">
    </span>
    } @else {
      <span class="flag">{{ currentLanguage()?.flag }}</span>
    }
    <span class="language-code">{{ currentLanguage()?.code?.toUpperCase() }}</span>
    <span class="arrow" [class.open]="isDropdownOpen()">â–¼</span>
  </button>

  <div class="dropdown" [class.open]="isDropdownOpen()">
      @for (lang of availableLanguages; track lang.code) {
    <button
      class="language-option"
      [class.active]="lang.code === currentLanguage()?.code"
      (click)="selectLanguage(lang.code)"
      type="button">
      @if (lang.flagImage) {
        <span class="flag">
          <img [src]="lang.flagImage" [alt]="lang.name" class="flag-image">
        </span>
      } @else {
        <span class="flag">{{ lang.flag }}</span>
      }
      <span class="name">{{ lang.name }}</span>
    </button>
    }
  </div>
</div>
