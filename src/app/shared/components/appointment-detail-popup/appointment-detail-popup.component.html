<pelu-popup-dialog
  [isOpen]="isOpen()"
  [config]="dialogConfig()"
  (closed)="onClose()"
>
  @if (isLoading()) {
    <div class="loading-container">
      <div class="loading-spinner"></div>
      <p>{{ 'COMMON.STATUS.LOADING' | translate }}</p>
    </div>
  } @else if (loadError()) {
    <div class="error-container">
      <div class="error-icon">‚ùå</div>
      <h3>{{ 'COMMON.ERROR' | translate }}</h3>
      <p>{{ 'COMMON.ERROR_LOADING_BOOKING' | translate }}</p>
    </div>
  } @else if (currentBooking()) {
    <div class="booking-info">
      <!-- Client Information Section -->
      <div class="form-section">
        <h3>{{ 'COMMON.CLIENT_INFORMATION' | translate }}</h3>
        <div class="form-grid">
          <div class="form-field">
            <pelu-input-text
              [label]="'COMMON.NAME'"
              [value]="getClientName(currentBooking()!)"
              [disabled]="true"
              [readonly]="true"
              [fluid]="true">
            </pelu-input-text>
          </div>

          <div class="form-field">
            <pelu-input-text
              [label]="'COMMON.EMAIL'"
              [value]="getClientEmail(currentBooking()!)"
              [disabled]="true"
              [readonly]="true"
              [fluid]="true">
            </pelu-input-text>
          </div>
        </div>
      </div>

      <!-- Booking Information Section -->
      <div class="form-section">
        <h3>{{ 'COMMON.BOOKING_INFORMATION' | translate }}</h3>
        <div class="form-grid">
          <div class="form-field">
            <pelu-input-date
              [label]="'COMMON.DATE'"
              [value]="currentBooking()!.data || ''"
              [disabled]="true"
              [readonly]="true">
            </pelu-input-date>
          </div>

          <div class="form-field">
            <pelu-input-text
              [label]="'COMMON.HOURS'"
              [value]="currentBooking()!.hora || ''"
              [disabled]="true"
              [readonly]="true"
              [fluid]="true">
            </pelu-input-text>
          </div>

          <div class="form-field">
            <pelu-input-text
              [label]="'COMMON.SERVICE'"
              [value]="serviceName()"
              [disabled]="true"
              [readonly]="true"
              [fluid]="true">
            </pelu-input-text>
          </div>

          <div class="form-field">
            <pelu-input-text
              [label]="'COMMON.DURATION'"
              [value]="serviceDuration()"
              [disabled]="true"
              [readonly]="true"
              [fluid]="true">
            </pelu-input-text>
          </div>

          <div class="form-field">
            <pelu-input-text
              [label]="'COMMON.PRICE'"
              [value]="servicePrice()"
              [disabled]="true"
              [readonly]="true"
              [fluid]="true">
            </pelu-input-text>
          </div>
        </div>
      </div>

      <!-- Notes Section -->
      @if (currentBooking()!.notes) {
        <div class="section">
          <h3>{{ 'COMMON.NOTES' | translate }}</h3>
          <div class="form-field">
            <pelu-input-textarea
              [label]="'COMMON.NOTES'"
              [value]="currentBooking()!.notes || ''"
              [disabled]="true"
              [readonly]="true"
              [fluid]="true"
              [rows]="3">
            </pelu-input-textarea>
          </div>
        </div>
      }
    </div>
  }


</pelu-popup-dialog>

<!-- Admin Warning Popup -->
<pelu-admin-warning-popup
  [isOpen]="showAdminWarningPopup()"
  [bookingOwnerName]="adminWarningBookingOwner()"
  (closed)="onAdminWarningClosed()"
>
</pelu-admin-warning-popup>
