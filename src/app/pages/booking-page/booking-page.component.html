<p-toast></p-toast>

<div class="container" style="margin-top: 2rem; view-transition-name: booking-container">
  <div class="booking-layout" style="margin-bottom: 2rem; view-transition-name: booking-grid">
    <!-- Calendar Section - Horizontal Layout -->
    <pelu-card class="calendar-section" style="view-transition-name: calendar-card">
      <h2 style="margin-top: 0;">{{ 'COMMON.CALENDAR_BOOKING' | translate }}</h2>
      <pelu-calendar-component
        [events]="events()"
        [mini]="true"
        (dateSelected)="onDateSelected($event)" />
    </pelu-card>

    <!-- Manual Booking Section - Smaller Size -->
    <pelu-card class="manual-booking-section" style="view-transition-name: manual-booking-card">
      <h2 style="margin-top: 0;">{{ 'COMMON.MANUAL_BOOKING' | translate }}</h2>
      <div class="form-group">
        <label for="nom">{{ 'COMMON.CLIENT_NAME' | translate }}:</label>
        <input
          type="text"
          id="nom"
          [value]="nouClient().nom"
          (input)="updateNom($any($event.target).value)"
          [placeholder]="'COMMON.ENTER_CLIENT_NAME' | translate"
          class="input">
      </div>

      <div class="form-group">
        <label for="data">{{ 'COMMON.DATE' | translate }}:</label>
        <input
          type="date"
          id="data"
          [value]="nouClient().data"
          (input)="updateData($any($event.target).value)"
          class="input">
      </div>

      <div class="form-group">
        <label for="hora">{{ 'COMMON.TIME' | translate }}:</label>
        <input
          type="time"
          id="hora"
          [value]="nouClient().hora"
          (input)="updateHora($any($event.target).value)"
          class="input">
      </div>

      <button
        class="btn btn-primary"
        (click)="afegirCita()"
        [disabled]="!canAddAppointment()">
        {{ 'COMMON.ADD_BOOKING' | translate }}
      </button>
    </pelu-card>
  </div>
</div>

<!-- Booking Confirmation Popup -->
<pelu-booking-popup
  [open]="showBookingPopup()"
  [bookingDetails]="bookingDetails()"
  (confirmed)="onBookingConfirmed($event)"
  (cancelled)="onBookingCancelled()"
  (clientNameChanged)="onBookingClientNameChanged($event)">
</pelu-booking-popup>
