<p-toast></p-toast>

<div class="booking-grid p-4">
  <div class="booking-calendar col-12 md:col-7 p-card">
    <h2>Calendari</h2>
    <pelu-calendar-component [events]="events()" [mini]="true" (dateSelected)="onDateSelected($event)" />
  </div>

  <div class="booking-form p-card col-12 md:col-5">
    <h2>Nova reserva</h2>
    <form (ngSubmit)="afegirCita()" #form="ngForm" novalidate>
      <label for="nom" class="block mb-1 font-semibold">Nom del client</label>
      <input id="nom" type="text" pInputText
             name="nom" required
             [ngModel]="nouClient().nom"
             (ngModelChange)="updateNom($event)"
             #nomCtrl="ngModel"
             [class.invalid]="nomCtrl.invalid && nomCtrl.touched" />

      <label for="data" class="block mt-3 mb-1 font-semibold">Data</label>
      <input id="data" type="date" pInputText
             name="data" required
             [ngModel]="nouClient().data"
             (ngModelChange)="updateData($event)"
             #dataCtrl="ngModel"
             [class.invalid]="dataCtrl.invalid && dataCtrl.touched" />

      <button type="submit" pButton label="Reservar"
              class="mt-4 w-full"
              [disabled]="form.invalid">
      </button>
    </form>
  </div>

  <div class="booking-list p-card col-12 mt-4">
    <h2>Cites programades</h2>
    <ul class="booking-list-ul">
      @for (cita of cites(); track cita.id) {
      <li class="booking-list-item">
        <span>{{ cita.data | date:'shortDate' }} - {{ cita.nom }}</span>
        <button pButton icon="pi pi-trash"
                class="p-button-rounded p-button-danger p-button-sm"
                (click)="esborrarCita(cita)"></button>
      </li>
      }
    </ul>
  </div>
</div>
